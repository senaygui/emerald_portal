<% provide(:title, "Profile") %>
<section class="content-header">
  <div class="container-fluid">
    <div class="row mb-2">
      <div class="col-sm-6">
        <h1>Dashboard</h1>
      </div>
      <div class="col-sm-6">
        <ol class="breadcrumb float-sm-right">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
        </ol>
      </div>
    </div>
  </div>
</section>

<section class="content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-12 col-md-8">

        <!-- Profile Image -->
        <div class="card card-primary">
          <div class="card-header">
            <h3 class="card-title">My Profile</h3>
          </div>
          <div class="card-body box-profile">
            <div class="text-center">
              <% if current_student.photo.attached? %>
                <%= image_tag(current_student.photo, size: '150x150', class: "profile-user-img img-fluid") %>
              <% else %>
                <%= image_tag("blank-profile-picture-973460_640.png", size: '150x150', class: "profile-user-img img-fluid img-circle") %>
              <% end %>
            </div>

            <h3 class="profile-username text-center"><b><%= "#{current_student.first_name.upcase} #{current_student.middle_name.upcase} #{current_student.last_name.upcase}" %></b></h3>

            <div class="text-center my-3">
              
                <%= link_to "Edit Profile", edit_student_registration_path, class: "btn btn-outline-primary btn-flat" %>
             
            </div>
            <ul class="list-group list-group-unbordered mb-3">
              <li class="list-group-item">
                <b>Student Fullname</b> <a class="text-muted float-right"><%= current_student.full_name %></a>
              </li>
              <li class="list-group-item">
                <b>Student ID</b> <a class="text-muted float-right"><%= current_student.student_id.present? ? current_student.student_id : "Not Assigned Yet" %></a>
              </li>
              
              <li class="list-group-item">
                <b>Gender</b> <a class="text-muted float-right"><%= current_student.gender %></a>
              </li>
              <li class="list-group-item">
                <b>Date Of Birth</b> <a class="text-muted float-right"><%= current_student.date_of_birth.present? ? current_student.date_of_birth.strftime("%b %d, %Y") : "N/A" %></a>
              </li>
              <li class="list-group-item">
                <b>Email</b> <a class="text-muted float-right"><%= current_student.email %></a>
              </li>
              <li class="list-group-item">
                <b>Program</b> <a class="text-muted float-right"><%= current_student.program&.program_name || "N/A" %></a>
              </li>
              <li class="list-group-item">
                <b>Batch</b> <a class="text-muted float-right"><%= current_student.batch&.batch_title || "N/A" %></a>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="card card-warning">
          <div class="card-header">
            <h3 class="card-title">Contact Address Information</h3>
          </div>
          <div class="card-body box-profile">
            <ul class="list-group list-group-unbordered mb-3">
              <li class="list-group-item">
                <b>Mobile Number</b> <a class="text-muted float-right"><%= current_student.moblie_number %></a>
              </li>
              <li class="list-group-item">
                <b>Country</b> <a class="text-muted float-right"><%= current_student.country %></a>
              </li>
              <li class="list-group-item">
                <b>City</b> <a class="text-muted float-right"><%= current_student.city %></a>
              </li>
              <li class="list-group-item">
                <b>Region</b> <a class="text-muted float-right"><%= current_student.region.present? ? current_student.region : "N/A" %></a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Account Information Card -->
        <div class="card card-info mt-3">
          <div class="card-header">
            <h3 class="card-title">Account Information</h3>
          </div>
          <div class="card-body box-profile">
            <ul class="list-group list-group-unbordered mb-3">
              <li class="list-group-item">
                  <b>Account Status</b>
                  <% status = current_student.account_status %>
                  <% badge_class = case status
                    when 'active' then 'badge-success'
                    when 'inactive' then 'badge-secondary'
                    when 'suspended' then 'badge-danger'
                    else 'badge-light'
                  end %>
                  <span class="float-right badge <%= badge_class %>" style="font-size: 1rem; min-width: 90px; text-transform: capitalize;">
                    <%= status %>
                  </span>
              </li>
              <li class="list-group-item">
                <b>Graduation Status</b> <a class="text-muted float-right"><%= current_student.graduation_status.present? ? current_student.graduation_status : "N/A" %></a>
              </li>
              <li class="list-group-item">
                <b>Fully Attended</b> <a class="text-muted float-right"><%= current_student.fully_attended %></a>
              </li>
              <li class="list-group-item">
                <b>Fully Attended Date</b> <a class="text-muted float-right"><%= current_student.fully_attended_date.present? ? current_student.fully_attended_date.strftime("%b %d, %Y") : "N/A" %></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>


  </div>
</section>

<style>
  .instruction-card {
  border: 4px solid;
  border-radius: 10px;
  animation: borderColorCycle 2.5s linear infinite;
}

@keyframes borderColorCycle {
  0%   { border-color: #28a745; }   /* green */
  33%  { border-color: #ffc107; }   /* yellow */
  66%  { border-color: #e53935; }   /* red */
  100% { border-color: #28a745; }   /* green */
  .clickable-link {
    color: #007bff; /* Bootstrap primary color */
    text-decoration: underline;
    cursor: pointer;
  }

  .clickable-link:hover {
    color: #0056b3; /* Darker shade for hover effect */
  }

  .profile-user-img {
    width: 150px;
    height: 150px;
    object-fit: cover;
  }
</style>
